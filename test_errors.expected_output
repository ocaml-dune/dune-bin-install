

Test that only a single anonymous argument is allowed:
[0;31merror[0m: Expected single anonymous argument (the Dune version) but got multiple: foo, bar


Test that unknown command-line arguments are detected:
[0;31merror[0m: Unknown option: --foo
Usage: install.sh [VERSION] [options]

Install a given version of the Dune binary distribution, or the latest stable version if VERSION is not specified.
Existing versions are listed at: https://github.com/ocaml-dune/dune-bin/releases
To install an unstable version (such as an alpha version) the version number must be specified explicitly.

Options:
--help, -h                Print this help message
--install-root PATH       Install Dune to the specified location instead of prompting
--update-shell-config     Always the shell config (e.g. .bashrc) if necessary
--no-update-shell-config  Never update the shell config (e.g. .bashrc)
--shell-config PATH       Use this file as your shell config when updating the shell config
--shell SHELL             One of: bash, zsh, fish, sh. Installer will treat this as your shell. Use 'sh' for minimal posix shells such as ash
--just-print-version      Make no changes to the system. The final line of stdout will be the version of dune that would have been installed
--no-tty                  Read interactive input from stdin rather than the terminal device (allows automation via yes et al.)
--debug-override-url URL  Download dune tarball from given url (debugging only)
--debug-tarball-dir DIR   Name of root directory inside tarball (debugging only)
--debug-version-repo REPO Override the git repo url used to determine the latest version of dune (debugging only)


Test that omitting the argument to --install-root is an error:
[0;31merror[0m: --install-root must be passed an argument


Test that passing anything other than an absolute path to --install-root is an error:
[0;31merror[0m: --install-root must be passed an absolute path (got "foo")


Test that --shell-config requires an argument:
[0;31merror[0m: --shell-config must be passed an argument


Test that --shell requires an argument:
[0;31merror[0m: --shell must be passed an argument


Test that --shell validates its argument:
[0;31merror[0m: --shell must be passed one of bash, zsh, fish, sh. Got foo.


Test that --debug-override-url requires an argument:
[0;31merror[0m: --debug-override-url must be passed an argument


Test that --debug-tarball-dir requires an argument:
[0;31merror[0m: --debug-tarball-dir must be passed an argument
